<%- include('../componentLayout/adminMenu') %> 

<h2 class="page-title mt-3 mb-3 d-flex justify-content-center">List all campaigns</h2>
<a href="/adminPage/createCampaign" class="btn btn-dark mb-3 d-flex justify-content-center">Create a new campaign</a>
<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Category</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
            <th>Feature</th>
        </tr>
    </thead>
    <tbody>
        <% if(campaigns != ''){%> <% campaigns.forEach(function(campaign, index){ %>
              <tr>
                <td><%- index %></td>
                <td><%-campaign.title%></td>
                <td><%-campaign.category %> </td>
                <td><%- campaign.first_closure.getMonth() + 1 %>/<%- campaign.first_closure.getDate()%>/<%- campaign.first_closure.getFullYear() %> <%- campaign.first_closure.getHours()%>:<%- campaign.first_closure.getMinutes() %></td>
                <td><%- campaign.final_closure.getMonth() + 1 %>/<%- campaign.final_closure.getDate()%>/<%- campaign.final_closure.getFullYear() %> <%- campaign.final_closure.getHours()%>:<%- campaign.final_closure.getMinutes() %></td>
                <% if(campaign.first_closure > current){%>
                    <td style="color: green;">Open</td>
                <% }else if(campaign.first_closure <= current && campaign.final_closure > current){%> 
                    <td style="color: blue;">First Closure Closed</td>
                <%}else{%>
                    <td style="color: red;">Closed</td>
                <% } %> 
                <td>
                    <a href="/adminPage/campaign/<%- campaign._id %>" class="btn btn-dark mb-2" onclick="">Edit</a>
                    <a href="/adminPage/deleteCampaign/<%- campaign._id %>" class="btn btn-dark" onclick="">Delete</a>
                </td>
              </tr>
              <% }) %> 
        <% } %>
    </tbody>
</table>
<%- include('../componentLayout/footer')  %> 
